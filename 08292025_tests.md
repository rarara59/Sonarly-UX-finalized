Return an .md file with these corrected tests

# Fix the below test
node scripts/stress-test-rpc-connection-pool.js

# Integration with existing system
node scripts/test-integration-rpc-connection-pool.js

Session 2 System Integration Tests
Component Factory Test:

node -e "
import('./system/component-factory.js').then(module => {
  console.log('✅ Component factory imported');
  const factory = module.ComponentFactory;
  return factory.create('rpc-connection-pool', {useFakes: false});
}).then(component => {
  console.log('✅ Real component created via factory');
  return component.call('getSlot', []);
}).then(result => {
  console.log('✅ Component works through factory:', result ? 'SUCCESS' : 'FAILED');
}).catch(err => {
  console.error('❌ Factory test failed:', err.message);
});"

System Orchestrator Test:

timeout 30 node -e "
import('./system/orchestrator.js').then(module => {
  console.log('✅ System orchestrator imported');
  const orchestrator = new module.SystemOrchestrator();
  return orchestrator.startSystem();
}).then(system => {
  console.log('✅ System started successfully');
  console.log('Active components:', Object.keys(system.components));
  return system.shutdown();
}).then(() => {
  console.log('✅ System shutdown gracefully');
}).catch(err => {
  console.error('❌ System test failed:', err.message);
});"

Real/Fake Switching Test:

USE_FAKES=true node -e "
import('./src/adapters/rpc-connection-pool.adapter.js').then(module => {
  console.log('✅ Adapter imported');
  return module.RpcConnectionPoolAdapter.create();
}).then(component => {
  console.log('✅ Fake component created');
  return component.call('getSlot', []);
}).then(result => {
  console.log('✅ Fake component works:', result);
}).catch(console.error);"

System-Level Validation
Configuration Validation:

# Check environment variables are loaded
node -e "
import('./system/config-manager.js').then(module => {
  const config = module.ConfigManager;
  console.log('RPC endpoints configured:', config.rpc.endpoints.length);
  console.log('Circuit breaker enabled:', config.rpc.breaker.enabled);
}).catch(console.error);"

Health Monitoring Test:

# Test health checks complete under 100ms
node -e "
import('./system/health-monitor.js').then(module => {
  const monitor = new module.HealthMonitor();
  const start = Date.now();
  return monitor.checkAll();
}).then(results => {
  const elapsed = Date.now() - start;
  console.log('Health check completed in', elapsed + 'ms');
  console.log('Results:', results);
}).catch(console.error);"

Production Readiness Tests
Memory Leak Detection (10-minute test):

# Long-running memory stability test
timeout 600 node -e "
import('./src/detection/transport/rpc-connection-pool.js').then(module => {
  const pool = new module.default();
  let calls = 0;
  const startMemory = process.memoryUsage().heapUsed;
  
  const interval = setInterval(async () => {
    try {
      await pool.call('getSlot', []);
      calls++;
      if (calls % 100 === 0) {
        const currentMemory = process.memoryUsage().heapUsed;
        const growth = ((currentMemory - startMemory) / 1024 / 1024).toFixed(2);
        console.log('Calls:', calls, 'Memory growth:', growth + 'MB');
      }
    } catch (err) {
      console.error('Call failed:', err.message);
    }
  }, 100);
  
  setTimeout(() => {
    clearInterval(interval);
    pool.destroy();
    console.log('Memory leak test completed');
  }, 600000);
}).catch(console.error);"

Full System Startup Test:

# Test complete system can start and handle requests
timeout 60 node -e "
import('./system/orchestrator.js').then(module => {
  const orchestrator = new module.SystemOrchestrator();
  return orchestrator.startSystem();
}).then(async (system) => {
  console.log('System started, testing RPC calls...');
  const rpc = system.components['rpc-connection-pool'];
  
  // Test multiple calls
  for (let i = 0; i < 10; i++) {
    const start = Date.now();
    const result = await rpc.call('getSlot', []);
    const latency = Date.now() - start;
    console.log('Call', i + 1, 'Slot:', result, 'Latency:', latency + 'ms');
  }
  
  await system.shutdown();
  console.log('Full system test completed successfully');
}).catch(console.error);"

Error Handling Tests
Circuit Breaker Test:

# Force circuit breaker to open
node -e "
import('./src/detection/transport/rpc-connection-pool.js').then(module => {
  const pool = new module.default({
    endpoints: ['https://invalid-endpoint.com'],
    breakerThreshold: 3
  });
  
  // Make calls that will fail
  const promises = Array(5).fill().map(() => 
    pool.call('getSlot', []).catch(() => console.log('Expected failure'))
  );
  
  return Promise.all(promises).then(() => {
    const stats = pool.getStats();
    console.log('Circuit breaker state after failures:', stats.circuitBreaker);
  });
}).catch(console.error);"

Failover test

# Test endpoint failover behavior
node -e "
import('./src/detection/transport/rpc-connection-pool.js').then(module => {
  const pool = new module.default({
    endpoints: [
      'https://invalid1.com',
      'https://invalid2.com', 
      process.env.PUBLIC_RPC_URL
    ]
  });
  
  return pool.call('getSlot', []).then(result => {
    console.log('Failover successful, got slot:', result);
    const stats = pool.getStats();
    console.log('Final endpoint used:', stats.currentEndpoint);
  });
}).catch(console.error);"

Quick Health Check Script
Create this as a single command:

cat > scripts/health-check.sh << 'EOF'
#!/bin/bash
echo "=== THORP SYSTEM HEALTH CHECK ==="

echo "1. Environment configuration..."
node -e "console.log('RPC endpoints:', process.env.HELIUS_RPC_URL ? '✅' : '❌')"

echo "2. Component imports..."
node -e "import('./src/detection/transport/rpc-connection-pool.js').then(() => console.log('RPC Pool: ✅')).catch(() => console.log('RPC Pool: ❌'))"

echo "3. System integration..."
node -e "import('./system/orchestrator.js').then(() => console.log('Orchestrator: ✅')).catch(() => console.log('Orchestrator: ❌'))"

echo "4. Real RPC connectivity..."
timeout 10 node scripts/verify-rpc-connection-pool.js | grep -q "SUCCESS" && echo "RPC Calls: ✅" || echo "RPC Calls: ❌"

echo "=== HEALTH CHECK COMPLETE ==="
EOF

chmod +x scripts/health-check.sh
./scripts/health-check.sh

