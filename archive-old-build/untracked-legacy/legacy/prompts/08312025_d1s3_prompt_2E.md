PROMPT 2E: Request Cache Component Testing
SINGLE FOCUS: Create comprehensive test suite for extracted request-cache.js component
EXPLICIT FILE PATHS:

Target: tests/unit/request-cache.test.js
Component Under Test: src/detection/transport/request-cache.js

INCREMENTAL IMPLEMENTATION PROCESS:
Step 1: Create test framework and mock expensive operations for RequestCache isolated testing
Step 2: Test cache hit/miss accuracy with TTL expiration using various cache patterns
Step 3: Test request coalescing for duplicate calls (multiple concurrent identical requests)
Step 4: Test LRU eviction and memory bounds with cache size limits and memory pressure
Step 5: Test cache invalidation, cleanup timing, and performance under sustained load
CLEAR SUCCESS CRITERIA:
Caching Requirements:

Cache hit rate: 70%+ for typical meme coin trading request patterns
TTL accuracy: Cache entries expire within 5% of configured TTL duration
Request coalescing: Duplicate in-flight requests return identical Promise results
Memory bounds: LRU eviction prevents unbounded growth beyond configured cache limits

Performance Requirements:

Cache lookup time: <1ms per get() operation including key generation and result lookup
Memory limit compliance: Stays within configured maximum entries (10,000 default)
Request coalescing efficiency: 95%+ reduction in duplicate operation execution
TTL cleanup performance: Expired entries cleaned within 60 seconds of expiration

REQUIREMENTS-BASED VALIDATION:
Measure These Metrics:

Cache hit rate percentage (target: 70%+ with realistic trading request patterns)
TTL expiration accuracy (target: Within 5% of configured TTL expiration time)
Duplicate request reduction (target: 95%+ reduction for identical concurrent calls)
Memory usage bounds compliance (target: Within configured limits via LRU eviction)
Cache lookup latency (target: <1ms per get() operation including all overhead)

Mock Request Testing Approach:

Create mock expensive operations that can be cached and have controllable execution times
Test various request patterns (repeated requests, unique requests, mixed patterns)
Validate request coalescing behavior with concurrent identical requests from multiple callers
Test cache behavior during memory pressure and verify LRU eviction correctness