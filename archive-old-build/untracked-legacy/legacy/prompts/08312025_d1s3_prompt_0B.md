PROMPT 0B: Component Factory and Dependency Injection
SINGLE FOCUS: Create component factory for dependency injection and lifecycle management
EXPLICIT FILE PATHS:

Target: src/detection/transport/component-factory.js
Configuration Source: Environment variables and configuration files

INCREMENTAL IMPLEMENTATION PROCESS:
Step 1: Create ComponentFactory class with configuration loading and validation
Step 2: Implement component creation methods for all 7 components with dependency resolution
Step 3: Add component lifecycle management (initialize, start, stop, health check)
Step 4: Create dependency ordering system for correct component initialization sequence
Step 5: Test factory creates all components in correct order with proper configuration
CLEAR SUCCESS CRITERIA:
Dependency Management Requirements:

Dependency resolution: Components created in correct dependency order every time
Configuration validation: All required environment variables validated before component creation
Component health: Individual component health checking capability for monitoring
Lifecycle management: Graceful startup and shutdown of all components in proper sequence

Component Creation Order (Dependency-Based):
// Level 1: Dependency-free components (can be created in any order)
1. TokenBucket (requires only rate limit configuration)
2. CircuitBreaker (requires only failure threshold configuration)
3. RequestCache (requires only cache size and TTL configuration)

// Level 2: Configuration-dependent components
4. EndpointSelector (requires endpoint list and health check configuration)
5. ConnectionPoolCore (requires HTTP agent configuration and connection limits)

// Level 3: Component-dependent components
6. BatchManager (requires ConnectionPoolCore for batch execution)
7. HedgedManager (requires EndpointSelector + ConnectionPoolCore for hedged requests)

// Level 4: Orchestrator (requires all 7 components)
8. RpcManager (requires all components injected via constructor)

REQUIREMENTS-BASED VALIDATION:
Measure These Metrics:

Component creation success rate (target: 100% successful creation for valid configurations)
Dependency resolution accuracy (target: 100% correct creation order every time)
Configuration validation effectiveness (target: 100% of invalid configurations caught)
Health check responsiveness (target: <100ms per component health check)
Lifecycle management reliability (target: 100% graceful startup and shutdown)